---
layout: default
title: Forside
---

<!-- üîç Filter og s√∏gefelt -->
<div id="filters" style="margin-bottom: 1.5rem;">
  <label for="search">S√∏g:</label>
  <input type="text" id="search" placeholder="S√∏g i titel og m√•l...">

  <label for="subject" style="margin-left: 1rem;">Filtrer efter valgfag:</label>
  <select id="subject">
    <option value="">Alle</option>
    <option value="Proces og l√¶ringsm√•l">Proces og l√¶ringsm√•l</option>
    <option value="Machine Learning og AI">Machine Learning og AI</option>
    <option value="Backend-udvikling og API-design">Backend-udvikling og API-design</option>
  </select>
</div>

<ul class="post-list">
  {% for post in paginator.posts %}
    {% assign electives = post.elective %}
    {% if electives %}
      {% if electives.first %}
        {%- assign electives_display = electives | join: ', ' -%}
        {%- assign electives_data    = electives | join: '|'  -%}
      {% else %}
        {%- assign electives_display = electives -%}
        {%- assign electives_data    = electives -%}
      {% endif %}
    {% endif %}

    <li class="post-item" data-subject="{{ electives_data | escape }}">
      <h2><a href="{{ post.url | absolute_url }}">{{ post.title }}</a></h2>
      <p>
        <strong>Dato:</strong> {{ post.date | date: "%d-%m-%Y" }}
        {% if post.week %} &nbsp;|&nbsp; <strong>Uge:</strong> {{ post.week }}{% endif %}
        {% if electives_display %} &nbsp;|&nbsp; <strong>Valgfag:</strong> {{ electives_display }}{% endif %}
      </p>
      {% if post.goals %}
        <p class="goals"><em>M√•l:</em> {{ post.goals | markdownify | strip_html | truncate: 160 }}</p>
      {% endif %}
      <a href="{{ post.url | absolute_url }}">L√¶s mere ‚Üí</a>
      <hr>
    </li>
  {% endfor %}
</ul>

<!-- üìÑ Pagination navigation -->
<div class="pagination">
  {% if paginator.previous_page %}
    <a href="{{ paginator.previous_page_path }}">Forrige</a>
  {% endif %}
  {% if paginator.next_page %}
    <a href="{{ paginator.next_page_path }}">N√¶ste</a>
  {% endif %}
</div>

<style>
.post-list { list-style: none; padding: 0; }
hr { border: 0; border-top: 1px solid #eee; margin: 1rem 0; }
</style>

<!-- üñ• JavaScript til s√∏gning, filtrering og persistens -->
<script>
document.addEventListener("DOMContentLoaded", function () {
  const searchInput = document.getElementById("search");
  const subjectSelect = document.getElementById("subject");
  const posts = document.querySelectorAll(".post-item");

  // üîÑ Load saved filter state
  const savedSearch = localStorage.getItem("portfolioSearch") || "";
  const savedSubject = localStorage.getItem("portfolioSubject") || "";

  searchInput.value = savedSearch;
  subjectSelect.value = savedSubject;

  function filterPosts() {
    const searchTerm = searchInput.value.toLowerCase();
    const selectedSubject = subjectSelect.value;

    // üíæ Save current filter state
    localStorage.setItem("portfolioSearch", searchTerm);
    localStorage.setItem("portfolioSubject", selectedSubject);

    posts.forEach(post => {
      const title = post.querySelector("h2").textContent.toLowerCase();
      const goals = post.querySelector(".goals")?.textContent.toLowerCase() || "";
      const subjects = (post.dataset.subject || "").split("|");

      const matchesSearch =
        !searchTerm ||
        title.includes(searchTerm) ||
        goals.includes(searchTerm);

      const matchesSubject =
        !selectedSubject || subjects.includes(selectedSubject);

      post.style.display = (matchesSearch && matchesSubject) ? "" : "none";
    });
  }

  // ‚ñ∂ Apply filter on page load (needed for pagination)
  filterPosts();

  // ‚ñ∂ Update filter on change
  searchInput.addEventListener("input", filterPosts);
  subjectSelect.addEventListener("change", filterPosts);
});
</script>
