---
layout: portfolio_post
title: "Uge 46 – Revision af High-level og Low-level Design"
week: 46
elective:
  - "Backend-udvikling og API-design"
  - "Machine Learning og AI"
goals: |
  Opdatere og revidere systemdesignet på baggrund af ny læring og ændrede krav.  
  Sikre at designet afspejler den endelige event-baserede arkitektur.
  Implementere LLM ved at refaktorere HLD og LLD.
process: |
  Gennemgå eksisterende analysemateriale fra uge 38 og identificere elementer, der skal revideres.  
  Opdatere use case, systemsekvensdiagram og sekvensdiagram så de passer til det event-baserede flow.  
  Erstatte billeder med de nye, reviderede versioner.
result: |
  I uge 38 udarbejdede jeg den første version af systemets High-level og Low-level design. Den kan læses her:  
  **[Uge 38 – Analyse af systemet High-level og Low-level Design](https://maha63312.github.io/2025/09/21/uge38.html)**

  Siden da er arkitekturen blevet justeret til at gøre brug af en object key for at hente presignedUrl. Dette har påvirket både use case og sekvensdiagrammerne.

  Nedenfor er de opdaterede versioner.

  **Revideret Use Case**  
  ![Use Case – Revideret](/assets/images/UseCaseRev.png)  
  Use casen er opdateret, så den afspejler en event-baseret arkitektur, hvor en ingestiontjeneste publicerer en besked med en billedreference (`objectKey`), som AI-servicen reagerer på.

  **Systemsekvensdiagram (Event-baseret)**  
  ![Systemsekvensdiagram – Message Broker](/assets/images/ssd-messagebroker.png)  
  Systemsekvensdiagrammet viser nu, at aktøren ikke kalder AI-servicen direkte. I stedet sendes en besked til message broker, som AI-servicen konsumerer. Outputtet returneres som et nyt event.

  **Sekvensdiagram (Intern AI-flow)**  
  ![Sekvensdiagram – Event-baseret billedklassificering](/assets/images/sd-event-baseret-billedklassificering.png)  
  Sekvensdiagrammet er revideret til at vise det interne flow inden i AI-servicen, nu med hentning af billedbytes via `objectKey`, analyse via provider og efterfølgende berigelse via LLM.

  **Beskrivelse af ændringer**
  - Use casen er omskrevet til event-baseret interaktion fremfor direkte endpoint-kald.  
  - SSD viser nu message broker som kommunikationspunkt i stedet for synkront API-kald.  
  - Sekvensdiagrammet er justeret, så analysen starter ved modtaget event og ikke ved en ekstern forespørgsel.  
  - Terminologien er opdateret (fx `objectKey` i stedet for `billedeRefs`).  
  - Billeder er udskiftet med reviderede versioner, der matcher den nye arkitektur.

  Opdateringen gør systemdesignet mere præcist og i tråd med den løsning, der rent faktisk skal bygges, samtidig med at strukturen fra uge 38 fastholdes som analytisk grundlag.

next_plan: |
  Uge 47: Implementere LLM i LLD. Udarbejdelse af dokumentation for udviklere der skal gøre brug af microservicen. 

---
