---
layout: portfolio_post
title: "Kafka Producer – Unit Test"
categories: ["snippets"]
date: 2025-11-06
week: 45
elective: "Backend-udvikling og API-design"

process: |
  Dette snippet viser en unit test af `PublishAsync`-metoden i Kafka-producer adapteren.
  Testen sikrer:
  - At eventet serialiseres korrekt
  - At `ProduceAsync` kaldes præcis én gang
  - At logging udføres korrekt

result: |
  **Screenshot af testen:**
  
  ![Test af PublishAsync]({{ "/assets/images/TestRecCompleted.png" | absolute_url }})

learning: |
  Denne test er med til at sikre, at microservicen er robust og deterministisk.
  Ved at mocke Kafka-produceren og serializeren kan testen verificere funktionaliteten
  uden afhængighed til den faktiske message broker.
  Det understøtter principperne for Ports & Adapters (Hexagonal Architecture)
  og gør systemet lettere at vedligeholde og udvide.

next_plan: "Udvide med tests for fejlscenarier, eksempelvis ved serialization og ved Kafka-unavailability."
---
